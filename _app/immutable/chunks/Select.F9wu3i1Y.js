import{Q as x,s as ee,x as P,e as k,a as R,b as E,d as v,g as m,c as U,k as y,K as q,f as T,i as M,l as L,r as I,R as pe,C as j,D as F,E as G,I as te,J as ne,F as K,G as z,o as O,t as le,j as oe,A as me,S as J,m as B,w as _e,M as ge,T as we,H as se,z as ie,n as be}from"./scheduler.DVOaE9AW.js";import{S as ae,i as re,c as fe,a as ue,m as ce,t as D,b as H,d as de}from"./index.BJQOvXO9.js";import{e as Q}from"./each.D6YF6ztN.js";import{M as ye,c as ke}from"./Select.svelte_svelte_type_style_lang.0dgWRj4A.js";import{i as Ee}from"./Container.DSJV3B17.js";function ve(o,e="body"){let t;async function l(s){if(e=s,typeof e=="string"){if(t=document.querySelector(e),t===null&&(await x(),t=document.querySelector(e)),t===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)t=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);t.appendChild(o),o.hidden=!1}function n(){o.parentNode&&o.parentNode.removeChild(o)}return l(e),{update:l,destroy:n}}const Me=o=>({}),X=o=>({});function Se(o){let e;return{c(){e=le("Menu")},l(t){e=oe(t,"Menu")},m(t,l){M(t,e,l)},d(t){t&&m(e)}}}function Ce(o){let e;const t=o[9].default,l=P(t,o,o[12],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,s){l&&l.m(n,s),e=!0},p(n,s){l&&l.p&&(!e||s&4096)&&j(l,t,n,n[12],e?G(t,n[12],s,null):F(n[12]),null)},i(n){e||(D(l,n),e=!0)},o(n){H(l,n),e=!1},d(n){l&&l.d(n)}}}function Ae(o){let e,t,l,n,s,i,c=`${o[2]}px`,p=`${o[3]}px`,u=`${o[4]}px`,r,d,_;const C=o[9].label,S=P(C,o,o[12],X),g=S||Se();return i=new ye({props:{$$slots:{default:[Ce]},$$scope:{ctx:o}}}),{c(){e=k("nav"),t=k("button"),g&&g.c(),l=R(),n=k("div"),s=k("div"),fe(i.$$.fragment),this.h()},l(a){e=E(a,"NAV",{class:!0});var h=v(e);t=E(h,"BUTTON",{class:!0});var A=v(t);g&&g.l(A),A.forEach(m),l=U(h),n=E(h,"DIV",{class:!0});var V=v(n);s=E(V,"DIV",{class:!0,style:!0});var N=v(s);ue(i.$$.fragment,N),N.forEach(m),V.forEach(m),h.forEach(m),this.h()},h(){y(t,"class","svelte-1sf0tmf"),y(s,"class","dropdown-content svelte-1sf0tmf"),y(s,"style",o[6]),y(n,"class","dropdown-container svelte-1sf0tmf"),n.hidden=!0,q(n,"open",o[5]),T(n,"top",c),T(n,"left",p),T(n,"max-height",u),y(e,"class","dropdown-menu"),q(e,"open",o[5])},m(a,h){M(a,e,h),L(e,t),g&&g.m(t,null),o[10](t),L(e,l),L(e,n),L(n,s),ce(i,s,null),o[11](s),r=!0,d||(_=[I(t,"click",o[7]),pe(ve.call(null,n,"#dropdowns")),I(n,"keydown",o[8]),I(e,"keydown",o[8])],d=!0)},p(a,[h]){S&&S.p&&(!r||h&4096)&&j(S,C,a,a[12],r?G(C,a[12],h,Me):F(a[12]),X);const A={};h&4096&&(A.$$scope={dirty:h,ctx:a}),i.$set(A),(!r||h&64)&&y(s,"style",a[6]),(!r||h&32)&&q(n,"open",a[5]),h&4&&c!==(c=`${a[2]}px`)&&T(n,"top",c),h&8&&p!==(p=`${a[3]}px`)&&T(n,"left",p),h&16&&u!==(u=`${a[4]}px`)&&T(n,"max-height",u),(!r||h&32)&&q(e,"open",a[5])},i(a){r||(D(g,a),D(i.$$.fragment,a),r=!0)},o(a){H(g,a),H(i.$$.fragment,a),r=!1},d(a){a&&m(e),g&&g.d(a),o[10](null),de(i),o[11](null),d=!1,te(_)}}}let Y;function Le(o,e,t){let{$$slots:l={},$$scope:n}=e;ne(()=>{if(console.log("Mounted"),!Y){let f=document.createElement("div");f.id="dropdowns",document.body.appendChild(f),Y=!0}});let s,i;Ee(e,"menu",["bg","fg","padding","width","height"]);let c,p,u;function r(){if(t(5,a=!a),a){A();let f=i.getBoundingClientRect(),w=s.getBoundingClientRect();t(2,c=w.bottom),t(3,p=w.left),p+f.width>window.innerWidth&&t(3,p=window.innerWidth-f.width),c+f.height>window.innerHeight&&t(2,c=Math.max(0,window.innerHeight-f.height)),c+f.height>window.innerHeight&&t(4,u=window.innerHeight-c),setTimeout(()=>window.addEventListener("click",d),0)}}function d(){t(5,a=!1),window.removeEventListener("click",d)}let _="";function C(f){f.key=="Backspace"&&_?_=_.slice(0,-1):f.key.length==1?(_||f.key!=" ")&&(_+=f.key,S(_)):(_="",f.key==="Escape"?d():(f.key==="ArrowDown"||f.key==="ArrowUp")&&(f.preventDefault(),g(f.key),_="")),console.log("Got ",f.key,"in menu")}function S(f){console.log("Maybe focus",f);let w=i.querySelectorAll("a,button,[tabindex]");for(let b of w)if(b.textContent&&b.textContent.toLowerCase().startsWith(f.toLowerCase())&&(console.log("Found",b),b.focus)){b.focus();return}}function g(f){var W;const w=Array.from(i.querySelectorAll("button, a, [tabindex]:not([tabindex='-1'])"));let b=w.findIndex(he=>he===document.activeElement);f==="ArrowDown"?b=(b+1)%w.length:f==="ArrowUp"&&(b=(b-1+w.length)%w.length),(W=w[b])==null||W.focus()}let a=!1,h="";function A(){t(6,h="");let f=getComputedStyle(s);for(let w of ke)f.getPropertyValue(w).trim()&&t(6,h+=`${w}: ${f.getPropertyValue(w).trim()};`)}function V(f){O[f?"unshift":"push"](()=>{s=f,t(0,s)})}function N(f){O[f?"unshift":"push"](()=>{i=f,t(1,i)})}return o.$$set=f=>{t(20,e=K(K({},e),z(f))),"$$scope"in f&&t(12,n=f.$$scope)},e=z(e),[s,i,c,p,u,a,h,r,C,l,V,N,n]}class Te extends ae{constructor(e){super(),re(this,e,Le,Ae,ee,{})}}function Z(o,e,t){const l=o.slice();return l[13]=e[t],l[15]=t,l}function $(o){let e,t,l,n=o[13].html+"",s,i,c;function p(){return o[9](o[15])}return{c(){e=k("li"),t=k("button"),l=new se(!1),s=R(),this.h()},l(u){e=E(u,"LI",{});var r=v(e);t=E(r,"BUTTON",{});var d=v(t);l=ie(d,!1),d.forEach(m),s=U(r),r.forEach(m),this.h()},h(){l.a=null},m(u,r){M(u,e,r),L(e,t),l.m(n,t),L(e,s),i||(c=I(t,"click",p),i=!0)},p(u,r){o=u,r&4&&n!==(n=o[13].html+"")&&l.p(n)},d(u){u&&m(e),i=!1,c()}}}function Ie(o){let e,t=Q(o[2]),l=[];for(let n=0;n<t.length;n+=1)l[n]=$(Z(o,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=B()},l(n){for(let s=0;s<l.length;s+=1)l[s].l(n);e=B()},m(n,s){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(n,s);M(n,e,s)},p(n,s){if(s&20){t=Q(n[2]);let i;for(i=0;i<t.length;i+=1){const c=Z(n,t,i);l[i]?l[i].p(c,s):(l[i]=$(c),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},d(n){n&&m(e),_e(l,n)}}}function De(o){let e;return{c(){e=le("-")},l(t){e=oe(t,"-")},m(t,l){M(t,e,l)},p:be,d(t){t&&m(e)}}}function He(o){let e,t=o[3].html+"",l;return{c(){e=new se(!1),l=B(),this.h()},l(n){e=ie(n,!1),l=B(),this.h()},h(){e.a=l},m(n,s){e.m(t,n,s),M(n,l,s)},p(n,s){s&8&&t!==(t=n[3].html+"")&&e.p(t)},d(n){n&&(m(l),e.d())}}}function Ve(o){let e,t;function l(i,c){return i[3]?He:De}let n=l(o),s=n(o);return{c(){e=k("span"),t=k("span"),s.c(),this.h()},l(i){e=E(i,"SPAN",{class:!0,slot:!0});var c=v(e);t=E(c,"SPAN",{});var p=v(t);s.l(p),p.forEach(m),c.forEach(m),this.h()},h(){y(e,"class","select-dropdown svelte-63mfnl"),y(e,"slot","label")},m(i,c){M(i,e,c),L(e,t),s.m(t,null)},p(i,c){n===(n=l(i))&&s?s.p(i,c):(s.d(1),s=n(i),s&&(s.c(),s.m(t,null)))},d(i){i&&m(e),s.d()}}}function Ne(o){let e,t,l,n,s,i,c;const p=o[5].default,u=P(p,o,o[10],null);return n=new Te({props:{$$slots:{label:[Ve],default:[Ie]},$$scope:{ctx:o}}}),{c(){e=k("select"),u&&u.c(),t=R(),l=k("div"),fe(n.$$.fragment),this.h()},l(r){e=E(r,"SELECT",{class:!0});var d=v(e);u&&u.l(d),d.forEach(m),t=U(r),l=E(r,"DIV",{class:!0});var _=v(l);ue(n.$$.fragment,_),_.forEach(m),this.h()},h(){y(e,"class","svelte-63mfnl"),o[0]===void 0&&me(()=>o[7].call(e)),y(l,"class","dropdown-wrapper svelte-63mfnl")},m(r,d){M(r,e,d),u&&u.m(e,null),J(e,o[0],!0),o[8](e),M(r,t,d),M(r,l,d),ce(n,l,null),s=!0,i||(c=[I(e,"change",o[7]),I(e,"change",o[6])],i=!0)},p(r,[d]){u&&u.p&&(!s||d&1024)&&j(u,p,r,r[10],s?G(p,r[10],d,null):F(r[10]),null),d&1&&J(e,r[0]);const _={};d&1036&&(_.$$scope={dirty:d,ctx:r}),n.$set(_)},i(r){s||(D(u,r),D(n.$$.fragment,r),s=!0)},o(r){H(u,r),H(n.$$.fragment,r),s=!1},d(r){r&&(m(e),m(t),m(l)),u&&u.d(r),o[8](null),de(n),i=!1,te(c)}}}function qe(o,e,t){let{$$slots:l={},$$scope:n}=e,{value:s}=e,i,c;ne(async()=>(await x(),r(),c=new MutationObserver(a=>{a.forEach(h=>{h.type==="childList"&&r()})}),c.observe(i,{childList:!0}),()=>c.disconnect()));let p=[],u=null;function r(){if(!i)return;t(2,p=[]);let a=i.querySelectorAll("option");for(let h of a)p.push({value:h.value,html:h.innerHTML});t(3,u=p[i.selectedIndex])}function d(a){console.log("Button to set",a),t(1,i.selectedIndex=a,i),i.dispatchEvent(new Event("change")),t(3,u=p[a])}function _(a){ge.call(this,o,a)}function C(){s=we(this),t(0,s)}function S(a){O[a?"unshift":"push"](()=>{i=a,t(1,i)})}const g=a=>d(a);return o.$$set=a=>{"value"in a&&t(0,s=a.value),"$$scope"in a&&t(10,n=a.$$scope)},[s,i,p,u,d,l,_,C,S,g,n]}class je extends ae{constructor(e){super(),re(this,e,qe,Ne,ee,{value:0})}}export{Te as D,je as S};

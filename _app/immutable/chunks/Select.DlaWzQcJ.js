import{Q as x,s as ee,x as P,e as k,a as R,b as E,d as v,g as m,c as U,k as y,L as q,f as T,i as M,l as A,r as I,R as pe,C as j,D as F,E as G,J as te,K as ne,F as K,G as z,o as O,t as le,j as oe,A as me,S as J,m as B,w as _e,I as ge,T as we,H as se,z as ie,n as be}from"./scheduler.DEib646s.js";import{S as re,i as ae,c as ue,a as ce,m as fe,t as D,b as H,d as de}from"./index.DNYspYh7.js";import{e as Q}from"./each.D6YF6ztN.js";import{i as ye,c as ke}from"./Columns.svelte_svelte_type_style_lang.DKRCLEky.js";import{M as Ee}from"./MenuList.DMIG9o7u.js";function ve(o,e="body"){let t;async function l(s){if(e=s,typeof e=="string"){if(t=document.querySelector(e),t===null&&(await x(),t=document.querySelector(e)),t===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)t=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);t.appendChild(o),o.hidden=!1}function n(){o.parentNode&&o.parentNode.removeChild(o)}return l(e),{update:l,destroy:n}}const Me=o=>({}),X=o=>({});function Se(o){let e;return{c(){e=le("Menu")},l(t){e=oe(t,"Menu")},m(t,l){M(t,e,l)},d(t){t&&m(e)}}}function Ce(o){let e;const t=o[9].default,l=P(t,o,o[12],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,s){l&&l.m(n,s),e=!0},p(n,s){l&&l.p&&(!e||s&4096)&&j(l,t,n,n[12],e?G(t,n[12],s,null):F(n[12]),null)},i(n){e||(D(l,n),e=!0)},o(n){H(l,n),e=!1},d(n){l&&l.d(n)}}}function Le(o){let e,t,l,n,s,i,f=`${o[2]}px`,p=`${o[3]}px`,c=`${o[4]}px`,a,d,_;const C=o[9].label,S=P(C,o,o[12],X),g=S||Se();return i=new Ee({props:{$$slots:{default:[Ce]},$$scope:{ctx:o}}}),{c(){e=k("nav"),t=k("button"),g&&g.c(),l=R(),n=k("div"),s=k("div"),ue(i.$$.fragment),this.h()},l(r){e=E(r,"NAV",{class:!0});var h=v(e);t=E(h,"BUTTON",{class:!0});var L=v(t);g&&g.l(L),L.forEach(m),l=U(h),n=E(h,"DIV",{class:!0});var V=v(n);s=E(V,"DIV",{class:!0,style:!0});var N=v(s);ce(i.$$.fragment,N),N.forEach(m),V.forEach(m),h.forEach(m),this.h()},h(){y(t,"class","svelte-my8s1r"),y(s,"class","dropdown-content svelte-my8s1r"),y(s,"style",o[6]),y(n,"class","dropdown-container svelte-my8s1r"),n.hidden=!0,q(n,"open",o[5]),T(n,"top",f),T(n,"left",p),T(n,"max-height",c),y(e,"class","dropdown-menu"),q(e,"open",o[5])},m(r,h){M(r,e,h),A(e,t),g&&g.m(t,null),o[10](t),A(e,l),A(e,n),A(n,s),fe(i,s,null),o[11](s),a=!0,d||(_=[I(t,"click",o[7]),pe(ve.call(null,n,"#dropdowns")),I(n,"keydown",o[8]),I(e,"keydown",o[8])],d=!0)},p(r,[h]){S&&S.p&&(!a||h&4096)&&j(S,C,r,r[12],a?G(C,r[12],h,Me):F(r[12]),X);const L={};h&4096&&(L.$$scope={dirty:h,ctx:r}),i.$set(L),(!a||h&64)&&y(s,"style",r[6]),(!a||h&32)&&q(n,"open",r[5]),h&4&&f!==(f=`${r[2]}px`)&&T(n,"top",f),h&8&&p!==(p=`${r[3]}px`)&&T(n,"left",p),h&16&&c!==(c=`${r[4]}px`)&&T(n,"max-height",c),(!a||h&32)&&q(e,"open",r[5])},i(r){a||(D(g,r),D(i.$$.fragment,r),a=!0)},o(r){H(g,r),H(i.$$.fragment,r),a=!1},d(r){r&&m(e),g&&g.d(r),o[10](null),de(i),o[11](null),d=!1,te(_)}}}let Y;function Ae(o,e,t){let{$$slots:l={},$$scope:n}=e;ne(()=>{if(console.log("Mounted"),!Y){let u=document.createElement("div");u.id="dropdowns",document.body.appendChild(u),Y=!0}});let s,i;ye(e,"menu",["bg","fg","padding","width","height"]);let f,p,c;function a(){if(t(5,r=!r),r){L();let u=i.getBoundingClientRect(),w=s.getBoundingClientRect();t(2,f=w.bottom),t(3,p=w.left),p+u.width>window.innerWidth&&t(3,p=window.innerWidth-u.width),f+u.height>window.innerHeight&&t(2,f=Math.max(0,window.innerHeight-u.height)),f+u.height>window.innerHeight&&t(4,c=window.innerHeight-f),setTimeout(()=>window.addEventListener("click",d),0)}}function d(){t(5,r=!1),window.removeEventListener("click",d)}let _="";function C(u){u.key=="Backspace"&&_?_=_.slice(0,-1):u.key.length==1?(_||u.key!=" ")&&(_+=u.key,S(_)):(_="",u.key==="Escape"?d():(u.key==="ArrowDown"||u.key==="ArrowUp")&&(u.preventDefault(),g(u.key),_="")),console.log("Got ",u.key,"in menu")}function S(u){console.log("Maybe focus",u);let w=i.querySelectorAll("a,button,[tabindex]");for(let b of w)if(b.textContent&&b.textContent.toLowerCase().startsWith(u.toLowerCase())&&(console.log("Found",b),b.focus)){b.focus();return}}function g(u){var W;const w=Array.from(i.querySelectorAll("button, a, [tabindex]:not([tabindex='-1'])"));let b=w.findIndex(he=>he===document.activeElement);u==="ArrowDown"?b=(b+1)%w.length:u==="ArrowUp"&&(b=(b-1+w.length)%w.length),(W=w[b])==null||W.focus()}let r=!1,h="";function L(){t(6,h="");let u=getComputedStyle(s);for(let w of ke)u.getPropertyValue(w).trim()&&t(6,h+=`${w}: ${u.getPropertyValue(w).trim()};`)}function V(u){O[u?"unshift":"push"](()=>{s=u,t(0,s)})}function N(u){O[u?"unshift":"push"](()=>{i=u,t(1,i)})}return o.$$set=u=>{t(20,e=K(K({},e),z(u))),"$$scope"in u&&t(12,n=u.$$scope)},e=z(e),[s,i,f,p,c,r,h,a,C,l,V,N,n]}class Te extends re{constructor(e){super(),ae(this,e,Ae,Le,ee,{})}}function Z(o,e,t){const l=o.slice();return l[13]=e[t],l[15]=t,l}function $(o){let e,t,l,n=o[13].html+"",s,i,f;function p(){return o[9](o[15])}return{c(){e=k("li"),t=k("button"),l=new se(!1),s=R(),this.h()},l(c){e=E(c,"LI",{});var a=v(e);t=E(a,"BUTTON",{});var d=v(t);l=ie(d,!1),d.forEach(m),s=U(a),a.forEach(m),this.h()},h(){l.a=null},m(c,a){M(c,e,a),A(e,t),l.m(n,t),A(e,s),i||(f=I(t,"click",p),i=!0)},p(c,a){o=c,a&4&&n!==(n=o[13].html+"")&&l.p(n)},d(c){c&&m(e),i=!1,f()}}}function Ie(o){let e,t=Q(o[2]),l=[];for(let n=0;n<t.length;n+=1)l[n]=$(Z(o,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=B()},l(n){for(let s=0;s<l.length;s+=1)l[s].l(n);e=B()},m(n,s){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(n,s);M(n,e,s)},p(n,s){if(s&20){t=Q(n[2]);let i;for(i=0;i<t.length;i+=1){const f=Z(n,t,i);l[i]?l[i].p(f,s):(l[i]=$(f),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},d(n){n&&m(e),_e(l,n)}}}function De(o){let e;return{c(){e=le("-")},l(t){e=oe(t,"-")},m(t,l){M(t,e,l)},p:be,d(t){t&&m(e)}}}function He(o){let e,t=o[3].html+"",l;return{c(){e=new se(!1),l=B(),this.h()},l(n){e=ie(n,!1),l=B(),this.h()},h(){e.a=l},m(n,s){e.m(t,n,s),M(n,l,s)},p(n,s){s&8&&t!==(t=n[3].html+"")&&e.p(t)},d(n){n&&(m(l),e.d())}}}function Ve(o){let e,t;function l(i,f){return i[3]?He:De}let n=l(o),s=n(o);return{c(){e=k("span"),t=k("span"),s.c(),this.h()},l(i){e=E(i,"SPAN",{class:!0,slot:!0});var f=v(e);t=E(f,"SPAN",{});var p=v(t);s.l(p),p.forEach(m),f.forEach(m),this.h()},h(){y(e,"class","select-dropdown svelte-g2lwxh"),y(e,"slot","label")},m(i,f){M(i,e,f),A(e,t),s.m(t,null)},p(i,f){n===(n=l(i))&&s?s.p(i,f):(s.d(1),s=n(i),s&&(s.c(),s.m(t,null)))},d(i){i&&m(e),s.d()}}}function Ne(o){let e,t,l,n,s,i,f;const p=o[5].default,c=P(p,o,o[10],null);return n=new Te({props:{$$slots:{label:[Ve],default:[Ie]},$$scope:{ctx:o}}}),{c(){e=k("select"),c&&c.c(),t=R(),l=k("div"),ue(n.$$.fragment),this.h()},l(a){e=E(a,"SELECT",{class:!0});var d=v(e);c&&c.l(d),d.forEach(m),t=U(a),l=E(a,"DIV",{class:!0});var _=v(l);ce(n.$$.fragment,_),_.forEach(m),this.h()},h(){y(e,"class","svelte-g2lwxh"),o[0]===void 0&&me(()=>o[7].call(e)),y(l,"class","dropdown-wrapper svelte-g2lwxh")},m(a,d){M(a,e,d),c&&c.m(e,null),J(e,o[0],!0),o[8](e),M(a,t,d),M(a,l,d),fe(n,l,null),s=!0,i||(f=[I(e,"change",o[7]),I(e,"change",o[6])],i=!0)},p(a,[d]){c&&c.p&&(!s||d&1024)&&j(c,p,a,a[10],s?G(p,a[10],d,null):F(a[10]),null),d&1&&J(e,a[0]);const _={};d&1036&&(_.$$scope={dirty:d,ctx:a}),n.$set(_)},i(a){s||(D(c,a),D(n.$$.fragment,a),s=!0)},o(a){H(c,a),H(n.$$.fragment,a),s=!1},d(a){a&&(m(e),m(t),m(l)),c&&c.d(a),o[8](null),de(n),i=!1,te(f)}}}function qe(o,e,t){let{$$slots:l={},$$scope:n}=e,{value:s}=e,i,f;ne(async()=>(await x(),a(),f=new MutationObserver(r=>{r.forEach(h=>{h.type==="childList"&&a()})}),f.observe(i,{childList:!0}),()=>f.disconnect()));let p=[],c=null;function a(){if(!i)return;t(2,p=[]);let r=i.querySelectorAll("option");for(let h of r)p.push({value:h.value,html:h.innerHTML});t(3,c=p[i.selectedIndex])}function d(r){console.log("Button to set",r),t(1,i.selectedIndex=r,i),i.dispatchEvent(new Event("change")),t(3,c=p[r])}function _(r){ge.call(this,o,r)}function C(){s=we(this),t(0,s)}function S(r){O[r?"unshift":"push"](()=>{i=r,t(1,i)})}const g=r=>d(r);return o.$$set=r=>{"value"in r&&t(0,s=r.value),"$$scope"in r&&t(10,n=r.$$scope)},[s,i,p,c,d,l,_,C,S,g,n]}class je extends re{constructor(e){super(),ae(this,e,qe,Ne,ee,{value:0})}}export{Te as D,je as S};
